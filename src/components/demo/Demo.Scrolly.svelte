<script>
	import Scrolly from "$components/helpers/Scrolly.svelte";
	import anime from 'animejs';
	// https://blog.hubspot.com/website/css-animate-on-scroll
	let value;
	let steps = [
		``,
		``,
    `The Language Server Protocol reduces complexity by diminishing the need for each language to cater to each editor.
	`,
    `step 2`,
  ];


  var requestButtonBehavior = function() {

var animation = anime({
  targets: '.request-box .el',
  translateX: 270,
  delay: function(el, i) { return i * 100; },
  direction: 'alternate',
  loop: false,
  autoplay: false,
  easing: 'easeInOutSine'
});

document.querySelector('.play-pause-demo .play').onclick = animation.play;
document.querySelector('.play-pause-demo .pause').onclick = animation.pause;
/*DEMO*/
}


</script>

<section id="scrolly" >

	<div class="spacer" />

	<Scrolly bind:value>
		<figure>
			<div style={{width: '100%', overflow: 'auto'}}>
				<img src='assets/demo/1stgraphwhitebg.svg' alt="imageofgraph" />
			</div>	
			<p>PLACEHOLDER</p>
		</figure>

		<figure class='sticky'>
			<div style={{width: '100%', overflow: 'auto'}} class="img-container">
				<img class="image image-1" src="assets/demo/1stgraphwhitebg.svg" alt="1">
			</div>	
		</figure>
		<!-- TODO-- fade in ON SCROLL -->
<!-- can't move the above ^ into steps because need the CSS classes to be accessible from styles -->
		{#each steps as text, i}
		<div class="step" class:active={value === i}>
		  <div class="step-content">{@html text}</div>
		</div>
	  {/each}

	  <p class="step">TRYING SOMETHING</p>
		<div class="request-path">
			<div class="request-box el"></div>
		</div>
		<div class="request-path">
			<div class="request-box el"></div>
		</div>
		<div class="request-controls">
			<button class="play" on:click={requestButtonBehavior }> Send client requests</button>
			<button class="pause"  on:click={requestButtonBehavior }> Pause</button>
		</div>
	
	</Scrolly>

	<div class="spacer" />
</section>

<style>

.play {
    background-color: white; /* Background color */
    color: var(--color-purple); /* Text color */
    border: 3px solid var(--color-purple);
    padding: 10px 20px;
    border-radius: 10px; 
    font-size: 16px;
    cursor: pointer;
    transition: background-color 0.3s ease;
	font-family: Playfair Display;
	font-size: x-large;
}

.play:hover {
    background-color: var(--color-purple); /* Change background color on hover */
    color: white; /* Text color */
    border: 3px solid var(--color-purple);
}

.pause {
    background-color: white; /* Background color */
    color: var(--color-purple); /* Text color */
    border: 3px solid var(--color-purple);
    padding: 10px 20px;
    border-radius: 10px; 
    font-size: 16px;
    cursor: pointer;
    transition: background-color 0.3s ease;
	font-family: Playfair Display;
	font-size: x-large;
}

.pause:hover {
    background-color: var(--color-purple); /* Change background color on hover */
    color: white; /* Text color */
    border: 3px solid var(--color-purple);
}

.img-container {
	background-image: url('assets/demo/2ndgraphwhitebg.svg');
	background-size: contain;
}


.image.image-1 {
    animation: fadeOut 3s ease-in-out forwards;
    animation-delay: 0.5s;
}

/* figure.sticky {
  position: -webkit-sticky;
  position: sticky;
  top: 0;
}
  /* animation: fadeOut 5s; */
 /* styles for parallaz scroll */

	.spacer {
		height: 25vh;
	}

	.step {
		height: 80vh;
		width: 100vw;
		background: var(--color-white);
		text-align: center;
	}

	.step div {
		padding: 1rem;
	}

	@keyframes fadeIn {
	0% { opacity: 0; }
	100% { opacity: 1; }
	}

	@keyframes fadeOut {
	0% { opacity: 1; }
	100% { opacity: 0; }
	}
</style>
